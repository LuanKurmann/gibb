import{a as E,b as c,c as _,d as L,g as M,i as N,j as k,q as R,s as G}from"./chunk-RDPPS4E7.js";import{a as j}from"./chunk-DFZIMTXV.js";import{Aa as C,Ba as F,C as d,I as m,J as n,K as a,L as u,N as h,O as g,T as f,V as s,X as l,o as x,qa as b,sa as S,v as i,wa as w,x as p,xa as I,y}from"./chunk-CPYGXC5A.js";import"./chunk-LJ5XHLMQ.js";import{h as v}from"./chunk-FK42CRUA.js";function B(r,o){if(r&1&&(n(0,"p",15),s(1),a()),r&2){let e=g();i(),l(" ",e.getFieldError("email")," ")}}function D(r,o){if(r&1&&(n(0,"p",15),s(1),a()),r&2){let e=g();i(),l(" ",e.getFieldError("password")," ")}}function V(r,o){if(r&1&&(n(0,"div",16),s(1),a()),r&2){let e=g();i(),l(" ",e.errorMessage," ")}}function z(r,o){r&1&&(n(0,"span",17),x(),n(1,"svg",18),u(2,"circle",19)(3,"path",20),a()())}var T=class r{constructor(o,e,t,q){this.fb=o;this.supabaseService=e;this.router=t;this.i18n=q;this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";onSubmit(){return v(this,null,function*(){if(this.loginForm.valid&&!this.isLoading){this.isLoading=!0,this.errorMessage="";try{let{email:o,password:e}=this.loginForm.value;yield this.supabaseService.signIn(o,e),this.router.navigate(["/dashboard"])}catch(o){this.errorMessage=this.i18n.t("auth.loginError"),console.error("Login error:",o)}finally{this.isLoading=!1}}})}getFieldError(o){let e=this.loginForm.get(o);if(e?.errors&&e.touched){if(e.errors.required)return o==="email"?this.i18n.t("auth.invalidEmail"):this.i18n.t("auth.passwordRequired");if(e.errors.email)return this.i18n.t("auth.invalidEmail");if(e.errors.minlength)return this.i18n.t("auth.passwordRequired")}return""}static \u0275fac=function(e){return new(e||r)(p(R),p(F),p(w),p(j))};static \u0275cmp=y({type:r,selectors:[["app-login"]],decls:26,vars:16,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],["routerLink","/auth/register",1,"font-medium","text-primary-600","hover:text-primary-500"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","name","email","type","email","formControlName","email",1,"mt-1","appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","focus:z-10","sm:text-sm"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","name","password","type","password","formControlName","password",1,"mt-1","appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-primary-500","focus:border-primary-500","focus:z-10","sm:text-sm"],["class","text-center text-sm text-red-600",4,"ngIf"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-primary-600","hover:bg-primary-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],[1,"mt-1","text-sm","text-red-600"],[1,"text-center","text-sm","text-red-600"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),s(4),a(),n(5,"p",3),s(6),n(7,"a",4),s(8),a()()(),n(9,"form",5),h("ngSubmit",function(){return t.onSubmit()}),n(10,"div",6)(11,"div")(12,"label",7),s(13),a(),u(14,"input",8),d(15,B,2,1,"p",9),a(),n(16,"div")(17,"label",10),s(18),a(),u(19,"input",11),d(20,D,2,1,"p",9),a()(),d(21,V,2,1,"div",12),n(22,"div")(23,"button",13),d(24,z,4,0,"span",14),s(25),a()()()()()),e&2&&(i(4),l(" ",t.i18n.t("auth.login")," "),i(2),l(" ",t.i18n.t("auth.dontHaveAccount")," "),i(2),l(" ",t.i18n.t("auth.register")," "),i(),m("formGroup",t.loginForm),i(4),l(" ",t.i18n.t("auth.email")," "),i(),f("border-red-500",t.getFieldError("email")),i(),m("ngIf",t.getFieldError("email")),i(3),l(" ",t.i18n.t("auth.password")," "),i(),f("border-red-500",t.getFieldError("password")),i(),m("ngIf",t.getFieldError("password")),i(),m("ngIf",t.errorMessage),i(2),m("disabled",!t.loginForm.valid||t.isLoading),i(),m("ngIf",t.isLoading),i(),l(" ",t.isLoading?"...":t.i18n.t("auth.loginButton")," "))},dependencies:[S,b,G,M,E,_,L,N,k,C,I],encapsulation:2})};export{T as LoginComponent};
